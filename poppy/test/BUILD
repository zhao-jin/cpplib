# BUILD script, generated by make2build

proto_library(
    name = 'echo_service_proto',
    srcs = 'echo_service.proto',
    deps = '//poppy:rpc_option_proto'
)

proto_library(
    name = 'snapshot_service_proto',
    srcs = 'snapshot_service.proto',
    deps = [
        '//poppy:rpc_option_proto',
        '//poppy:rpc_message_proto'
    ]
)

cc_binary(
    name = 'echoserver',
    srcs = [
        'echo_server.cc'
    ],
    deps = [
        ':echo_service_proto',
        '//poppy:poppy'
    ]
)

cc_binary(
    name = 'sync_client',
    srcs = [
        'sync_client.cc'
    ],
    deps = [
        ':echo_service_proto',
        '//poppy:poppy',
    ]
)

cc_binary(
    name = 'async_client',
    srcs = [
        'async_client.cc'
    ],
    deps = [
        ':echo_service_proto',
        '//poppy:poppy',
    ]
)

cc_test(
    name = 'poppy_test',
    srcs = [
        'poppy_test.cc'
    ],
    deps = [
        ':echo_service_proto',
        '//poppy:poppy',
        '//thirdparty/perftools:tcmalloc',
    ]
)

cc_test(
    name = 'rpc_server_pages_test',
    srcs = 'rpc_server_pages_test.cc',
    deps = [
        ':echo_service_proto',
        '//poppy:poppy',
        '//thirdparty/perftools:tcmalloc',
    ]
)

cc_test(
    name = 'rpc_handler_test',
    srcs = 'rpc_handler_test.cc',
    deps = [
        ':echo_service_proto',
        '//poppy:poppy',
        '//thirdparty/perftools:tcmalloc',
    ]
)

cc_binary(
    name = 'snapshot_server',
    srcs = [
        'snapshot_server.cc'
    ],
    deps = [
        ':snapshot_service_proto',
        '//poppy:poppy',
        '//thirdparty/gtest:gtest',
        '//thirdparty/gtest:gtest_main'
    ]
)

cc_binary(
    name = 'snapshot_client',
    srcs = [
        'snapshot_client.cc'
    ],
    deps = [
        ':snapshot_service_proto',
        '//poppy:poppy',
        '//thirdparty/gtest:gtest',
        '//thirdparty/gtest:gtest_main'
    ]
)

cc_test(
    name = 'poppy_test_client',
    srcs = [
        'poppy_test_client.cc',
        'server_controller.cc'
    ],
    deps = [
        ':echo_service_proto',
        ':poppy_test_command',
        '//poppy/:poppy',
        '//thirdparty/gflags/:gflags',
        '//thirdparty/glog/:glog',
    ]
)

cc_library(
    name = 'poppy_test_command',
    srcs = 'poppy_test_command.cc'
)

cc_binary(
    name = 'poppy_test_agent',
    srcs = 'poppy_test_agent.cc',
    deps = [
        ':poppy_test_command',
        '//common/netframe/:netframe',
        '//thirdparty/gflags/:gflags',
        '//thirdparty/glog/:glog',
    ]
)
